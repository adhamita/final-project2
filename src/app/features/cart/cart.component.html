<div class="my-5">
   @if (isLoading) {
   <div class="bg-gray-50 p-4 rounded">
     <!-- Header Skeleton -->
      <div class="flex justify-center">

        <app-cart-loading></app-cart-loading>
      </div>
     
     <!-- Cart Items Skeleton -->
     @for (item of [1,2,3]; track $index) {
       <div class="flex flex-col sm:flex-row gap-2 mb-5 items-center animate-pulse">
         <!-- Image Skeleton -->
         <div class="w-32 sm:w-24 md:w-20 lg:w-1/12 flex-shrink-0">
           <div class="w-full aspect-square bg-gray-300 rounded"></div>
         </div>
         
         <!-- Content Skeleton -->
         <div class="flex-1 flex flex-col sm:flex-row justify-between items-center w-full">
           <div class="space-y-2 text-center sm:text-left">
             <div class="h-6 bg-gray-300 rounded w-48"></div>
             <div class="h-4 bg-gray-300 rounded w-20"></div>
             <div class="h-4 bg-gray-300 rounded w-16"></div>
           </div>
           
           <!-- Counter Skeleton -->
           <div class="flex items-center space-x-2 mt-2 sm:mt-0">
             <div class="w-8 h-8 bg-gray-300 rounded border-2"></div>
             <div class="w-8 h-4 bg-gray-300 rounded"></div>
             <div class="w-8 h-8 bg-gray-300 rounded border-2"></div>
           </div>
         </div>
       </div>
     }
     
     <!-- Delete Button Skeleton -->
     <div class="animate-pulse">
       <div class="h-10 bg-gray-300 rounded w-20 mt-4"></div>
     </div>
   </div>
   }@else {
     <div class="bg-gray-50  p-4 rounded">
        <h2 class="text-green-500 font-semibold text-4xl">Shop Cart</h2>
        <span class="text-green-500 text-2xl block mb-4">Total price : {{cardData?.data?.totalCartPrice}}</span>
       @for (products of cardData?.data?.products; track $index ; let i = $index) {
        <div class="flex flex-col sm:flex-row gap-2 mb-5 items-center">
  <div class="w-32 sm:w-24 md:w-20 lg:w-1/12 flex-shrink-0">
    <img [src]="products.product.imageCover" class="w-full" alt="">
  </div>
  <div class="flex-1 flex flex-col sm:flex-row justify-between items-center w-full">
    <div class="space-y-1 text-center sm:text-left">
      <p class="text-gray-700 text-lg sm:text-2xl">{{products?.product?.title}}</p>
      <span class="text-green-500 block">price : {{products?.price}}</span>
      <button 
      (click)="deleteProduct(products.product._id)"
      class="text-green-500 cursor-pointer flex gap-2 items-center p-0 mx-auto sm:mx-0">
        <i class="fa fa-solid fa-trash"></i>
        <span>remove</span>
      </button>
    </div>
    <div class="flex items-center space-x-1 mt-2 sm:mt-0">
      <button 
      [disabled]="updateLoading && currenIndex == i"
      (click)="updateProductCount( products.product._id , products.count + 1 ,i) "
      class="size-8 border-2 rounded cursor-pointer border-green-500 flex justify-center items-center">
       @if (updateLoading && currenIndex == i){
        <i class="fa fa-solid fa-spinner fa-spin"></i>
       }@else {
        <i class="fa fa-solid text-[.625rem] fa-plus"></i>
       } 
      </button>
      <span>{{products.count}}</span>
      <button 
      [disabled]="updateLoading && currenIndex == i"
      (click)="updateProductCount( products.product._id , products.count - 1 ,i) "
      class="size-8 border-2 rounded cursor-pointer border-green-500 flex justify-center items-center">
      @if (updateLoading && currenIndex == i) {
        <i class="fa fa-solid fa-spinner fa-spin"></i>
      }@else {
        <i class="fa fa-solid text-[.625rem] fa-minus"></i>
      }
      </button>
    </div>
  </div>
</div>
       }@empty {
        <p class="text-center text-gray-500 text-2xl">No products in cart</p>
       }



       @if (cardData?.numOfCartItems) {
                 <button (click)="clearCart()" class="  bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 transition-all duration-300 active:scale-[.89] cursor-pointer">delete</button>
                 <button (click)="checkoutSession()" class="  bg-sky-500 text-white px-4 py-2 rounded hover:bg-sky-700 transition-all duration-300 active:scale-[.89] cursor-pointer">checkOut</button>

       }
    </div>
   }
</div>